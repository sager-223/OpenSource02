3
9d`?  ?               @   s|   d dl mZ ddlmZmZmZmZ ddlmZ ej	d?dd? ?Z
ej	d?d	d
? ?Zej	d?dd? ?Zej	d?dd? ?ZdS )?   )?api?    )?CarArea?CarUseYear?CarBrandTop10?CarMonth)?render_templatez/showBrandBarc              C   sB   t jj? } dd? | D ?}dd? | D ?}t|? t|? tdt? ?S )Nc             S   s   g | ]
}|j ?qS ? )?brand)?.0?ir	   r	   õE   C:\Users\20193\Desktop\Pythonå­¦ä¹ \car_home\car_home\api_1_0\show.py?<listcomp>   s    z showBrandBar.<locals>.<listcomp>c             S   s   g | ]
}|j ?qS r	   )?count)r   r   r	   r	   r   r   	   s    ?showBrandBar.html)r   )r   ?query?all?printr   ?locals)Zcar_brand_top10r
   r   r	   r	   r   ?showBrandBar   s    
r   z/showPiec              C   s$   t jj? } dd? | D ?}tdt? ?S )Nc             S   s   g | ]}|j |jd ??qS ))?name?value)?year_arear   )r   r   r	   r	   r   r      s    zshowPie.<locals>.<listcomp>?showPie.html)r   )r   r   r   r   r   )Zcar_use_year?datar	   r	   r   ?showPie   s    
r   z/showAreaBarc              C   s2   t jj? } dd? | D ?}dd? | D ?}tdt? ?S )Nc             S   s   g | ]
}|j ?qS r	   )?area)r   r   r	   r	   r   r      s    zshowAreaBar.<locals>.<listcomp>c             S   s   g | ]
}|j ?qS r	   )r   )r   r   r	   r	   r   r      s    ?showAreaBar.html)r   )r   r   r   r   r   )Zcar_arear   r   r	   r	   r   ?showAreaBar   s    
r   z	/showLinec              C   s2   t jj? } dd? | D ?}dd? | D ?}tdt? ?S )Nc             S   s   g | ]
}|j ?qS r	   )?month)r   r   r	   r	   r   r   #   s    zshowLine.<locals>.<listcomp>c             S   s   g | ]
}|j ?qS r	   )r   )r   r   r	   r	   r   r   $   s    ?showLine.html)r    )r   r   r   r   r   )Z	car_monthr   r   r	   r	   r   ?showLine    s    
r!   N)? r   Zcar_home.modelsr   r   r   r   ?flaskr   ?router   r   r   r!   r	   r	   r	   r   ?<module>   s   